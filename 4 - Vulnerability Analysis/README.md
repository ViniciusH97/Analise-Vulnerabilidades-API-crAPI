# Análise de Vulnerabilidades

O objetivo desta fase é analisar a superfície de ataque das APIs que foram mapeadas na fase [Intelligence Gathering](https://github.com/ViniciusH97/Analise-Vulnerabilidades-API-crAPI/tree/main/2%20-%20Intelligence%20Gathering) para identificar e validar a existência de falhas de segurança.

O foco da análise será nas vulnerabilidades do OWASP API Security Top 10, com ênfase em falhas de Autenticação e Autorização.

## Ferramentas Principais

- **Burp Suite:** Interceptação por Proxy, repetição (Repeater) e automação (Intruder).

- **Postman:** Organização e envio de requisições-base.

- **Contas de Teste:**

        Usuário A: usuario1@gmail.com

        Usuario B: usuario2@gmail.com

## Análise de Vulnerabilidades de Endpoints:

Endpoints que envolve identidade de usuário (Broken Authentication)

Os endpoints abaixo pode ser usado por um atacante para se passar por outra pessoa ou quebrar o fluxo de login.

### Análise do endpoint: `POST /identity/api/auth/login`

Foi feito requisições com email e senha invalidos e foi possivel obter as seguintes respostas no endpoint `identity/api/auth/login`:

1. **E-mail correto e senha incorretos:** O endpoint retorna a mensagem `Invalid Credentials`.
2. **E-mail e senha incorreta:** O endpoint retorna a mensagem `Given a E-mail is not registered`.

Após a análise foi possível identificar respostas diferentes para cada caso. Quando o e-mail é válido e a senha é inválide, e quanto do e-mail e senha são invalidos. O retorno de credenciais inválidas e que o e-mail não está cadastrado facilita ao atacante realizar uma enumeração de usuários, ou seja, pode aplicar um ataque dicionário, esperando as resposta das requisições `Invalid Credentials`, fornecendo a informação que o e-mail está cadastrado mas a senha não é válida, caso contrário, se retornar `Given a E-mail not registered` significa que o e-mail não está cadastrado no banco de dados.

### Análise do endpoint: `POST /identity/api/v2/user/reset-password`
